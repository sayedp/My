PFA script, which analyze stracefile and report top 15 lines where it took most of the time

Requirement

1. Strace should be collected along with -T option (ie last column should be elapsed time)


How to run

./strace_parser.sh <stracefilename>

sasha@SASHA-IN [~]$ ./strace_parser.sh strace_shut.txt

####################################################################################
Strace Parser: Find top 15 time consuming activity in stracefile
Usage : ./strace_parser strace_file
Columns:  Time (In Seconds), LineNo, Full Activity
####################################################################################

Time(S)         LNo             Full_Activity

15.730977       845             1542208407.253857 read(0, "shut immediat\n", 1024) = 14 <15.730977>
3.940213        851             1542208422.985630 read(0, "shut immediate\n", 1024) = 15 <3.940213>
3.232988        865             1542208429.599836 read(11, "\0\26\0\0\6\0\0\0\0\0\10\1\0\0\0\t\1\0\0\0\0\0", 8208) = 22 <3.232988>
2.719583        882             1542208432.834260 read(0, "exit\n", 1024) = 5 <2.719583>
2.112304        853             1542208426.927582 read(11, "\0\26\0\0\6\0\0\0\0\0\10\1\0\0\0\t\5\0\0\0\t\0", 8208) = 22 <2.112304>
0.541022        855             1542208429.040345 read(11, "\0\313\0\0\6\0\0\0\0\0\10\6\0\0\0\0\0\0\0\0\0\1\0\0\0\0\0\0\0\0\0\0"..., 8208) = 203 <0.541022>
0.033132        767             1542208407.211417 read(11, "\6\343\0\0\6\0\0\0\0\0\10&\0\23\0\0\0\23AUTH_VERSION_S"..., 8208) = 1763 <0.033132>
0.017385        860             1542208429.582138 read(11, "\0\265\0\0\6\0\0\0\0\0\10\6\0\0\0\0\0\0\0\0\0\3\0\0\0\0\0\0\0\0\0\0"..., 8208) = 181 <0.017385>
0.016893        644             1542208407.114340 read(11, "NTP0 20036\n", 64) = 11 <0.016893>
0.009218        648             1542208407.146041 read(11, "\0 \0\0\2\0\0\0\1:\f\1 \0\20\0\1\0\0\0\0 AA\0\0\0\0\0\0\0\0", 8208) = 32 <0.009218>
0.007967        666             1542208407.188425 read(11, "\0L\0\0\6\0\0\0\0\0\0103\0003Oracle Database 11"..., 8208) = 76 <0.007967>
0.007563        650             1542208407.165777 read(11, "\0\213\0\0\6\0\0\0\0\0\336\255\276\357\0\201\0\0\0\0\0\4\0\0\4\0\3\0\0\0\0\0"..., 8208) = 139 <0.007563>
0.001680        891             1542208435.555178 write(10, "\0\n\0\0\6\0\0\0\0@", 10) = 10 <0.001680>
..

..
